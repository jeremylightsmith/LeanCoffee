!function(a){a("tr.pro-feature, tr.pro-feature td :radio").change(function(){this.checked=!1,alert("This option is only available in the premium version of MailChimp for WordPress."),event.stopPropagation()}),a("tr.pro-feature, tr.pro-feature label").click(function(){alert("This option is only available in the premium version of MailChimp for WordPress."),event.stopPropagation()}),function(){function b(){var b=$lists.filter(":checked").length>0;a(".mc4wp-notice.no-lists-selected").toggle(!b),a("#mc4wp-fw-mailchimp-fields").toggle(b)}$lists=a("#mc4wp-lists :input"),$lists.change(b)}(),a(document).delegate("#mc4wpformmarkup","keydown",function(b){var c=b.keyCode||b.which;if(9==c){b.preventDefault();var d=this.selectionStart,e=this.selectionEnd;a(this).val(a(this).val().substring(0,d)+"	"+a(this).val().substring(e)),this.selectionStart=this.selectionEnd=d+1}}),function(){"undefined"!=typeof QTags&&(QTags.addButton("mc4wp_paragraph","<p>","<p>","</p>","paragraph","Paragraph tag",1),QTags.addButton("mc4wp_label","label","<label>","</label>","label","Label tag",2),QTags.addButton("mc4wp_response","form response","{response}","","response","Shows the form response"),QTags.addButton("mc4wp_subscriber_count","# of subscribers","{subscriber_count}","","subscribers","Shows number of subscribers of selected list(s)"),1==window.mc4wp.has_captcha_plugin&&QTags.addButton("mc4wp_captcha","CAPTCHA","{captcha}","","captcha","Display a CAPTCHA field"))}(),function(){function b(){o.find("option").not(".default").remove(),n.filter(":checked").each(function(){for(var b=a(this).data("list-fields"),c=a(this).data("list-groupings"),d=0,e=b.length;e>d;d++){var f=b[d];if(0==p.find("option[value='"+f.tag+"']").length){var g=f.name.length>25?f.name.substring(0,25)+"..":f.name;f.req&&(g+="*");var h=a("<option />").text(g).val(f.tag).data("list-field",f);d>3&&h.text("(PRO ONLY) "+g).attr("disabled","disabled").data("field",null),p.append(h)}}for(var d=0,i=c.length;i>d;d++){var j=c[d];if(0==q.find("option[value='"+j.id+"']").length){var g=j.name.length>25?j.name.substring(0,25)+"..":j.name,h=a("<option />").text(g).val(j.id).data("list-grouping",j);d>=1&&h.text("(PRO ONLY) "+g).attr("disabled","disabled").data("list-grouping",null),q.append(h)}}})}function c(){d();var b=a(this).find(":selected");switch(b.val()){case"submit":l="submit",t.text("Button text"),r.find("p.row").filter(".value, .wrap-p").show();break;case"lists":l="lists",r.find(".wrap-p").show(),j();break;default:var c=b.data("list-field");if(c)return h(c);var c=b.data("list-grouping");if(c)return f(c)}j()}function d(){r.find(".row :input").each(function(){a(this).is(":checkbox")?this.checked=!0:this.value=""}),r.find("p.row").hide(),u.find(":input").remove(),r.show(),l="text",m="",t.html("Initial value <small>(optional)</small>")}function e(b){for(var c=0,d=b.length;d>c;c++)a("<input />").attr("type","text").addClass("widefat").data("value",b[c].name).attr("placeholder",'Label for "'+b[c].name+'" (or leave empty)').attr("value",b[c].name).appendTo(u)}function f(a){switch(r.find("p.row").filter(".values, .label, .wrap-p").show(),v.val(a.name+":"),m="GROUPINGS["+a.id+"]",e(a.groups),a.form_field){case"radio":l="radio";break;case"hidden":r.find("p.row").filter(".values, .label, .wrap-p").hide(),r.find("p.row.value").show();for(var b=0,c=a.groups.length;c>b;b++)s.val(s.val()+a.groups[b].name+",");l="hidden";break;case"dropdown":l="select";break;default:l="checkbox",m+="[]"}j()}function g(){var b="";return n.each(function(){var c=a(this).val(),d=a(this).parent("label").text(),e="";a(this).is(":checked")&&(e+="checked "),b+="<label>\n",b+='	<input type="checkbox" name="_mc4wp_lists[]" value="'+c+'" '+e+" /> "+d+"\n",b+="</label>\n"}),b}function h(b){var c={"default":["label","value","placeholder","required","wrap-p"],select:["label","required","wrap-p","values"],radio:["label","required","wrap-p","values"],date:["label","required","wrap-p","value"]},d={text:"text",email:"email",phone:"tel",address:"text",number:"number",dropdown:"select",date:"date",birthday:"date",radio:"radio",checkbox:"checkbox"};if(l=void 0!=d[b.field_type]?d[b.field_type]:"text",void 0!=c[l])var e=c[l];else var e=c["default"];for(var f=0,g=e.length;g>f;f++)r.find("p.row."+e[f]).show();if(l=l,m=b.tag,w.val("Your "+b.name.toLowerCase()),v.val(b.name+":"),x.attr("checked",b.req),u.is(":visible")&&b.choices)for(var f=0,g=b.choices.length;g>f;f++)a("<input />").attr("type","text").addClass("widefat").data("value",b.choices[f]).attr("placeholder",'Label for "'+b.choices[f]+'" (or leave empty)').attr("value",b.choices[f]).appendTo(u);j()}function i(a){a=html_beautify(a),z.val(a)}function j(){var b,c=a("<div></div>");switch(l){case"lists":var d=g();return y.is(":visible:checked")&&(d="<p>"+d+"</p>"),i(d);case"select":b=a("<select />"),u.find(":input").each(function(){a(this).val().length>0&&($el=a("<option />").val(a(this).data("value")).text(a(this).val()),$el.appendTo(b))});break;case"radio":case"checkbox":u.find(":input").each(function(){a(this).val().length>0&&(b=a("<input />").attr("type",l).attr("name",m).val(a(this).data("value")),x.is(":visible:checked")&&b.attr("required",!0),c.append(b),b.wrap("<label />"),a("<span />").text(a(this).val()+" ").insertAfter(b))});break;case"textarea":b=a("<textarea />");break;default:b=a("<input />").attr("type",l)}"radio"!=l&&"checkbox"!=l&&(m.length>0&&b.attr("name",m),s.is(":visible")&&s.val().length>0&&("textarea"==l?b.text(s.val()):b.attr("value",s.val())),w.is(":visible")&&w.val().length>0&&b.attr("placeholder",w.val()),x.is(":visible:checked")&&b.attr("required",!0),c.append(b)),v.is(":visible")&&v.val().length>0&&a("<label />").text(v.val()).prependTo(c),y.is(":visible:checked")&&c.wrapInner(a("<p />"));var d=c.html();i(d)}function k(){var b=!1;"undefined"!=typeof wpActiveEditor&&"undefined"!=typeof QTags&&QTags.insertContent&&(b=QTags.insertContent(z.val())),b||($formContent=a("#mc4wpformmarkup"),$formContent.val($formContent.val()+"\n"+z.val()))}var l,m,n=a("#mc4wp-lists :input"),o=a("#mc4wp-fw-mailchimp-fields"),p=a("#mc4wp-fw-mailchimp-fields .merge-fields"),q=a("#mc4wp-fw-mailchimp-fields .groupings"),r=a("#mc4wp-fw-fields"),s=a("#mc4wp-fw-value"),t=a("#mc4wp-fw-value-label"),u=a("#mc4wp-fw-values"),v=a("#mc4wp-fw-label"),w=a("#mc4wp-fw-placeholder"),x=a("#mc4wp-fw-required"),y=a("#mc4wp-fw-wrap-p"),z=a("#mc4wp-fw-preview");n.change(b),o.change(c),r.change(j),a("#mc4wp-fw-add-to-form").click(k),b()}()}(jQuery);